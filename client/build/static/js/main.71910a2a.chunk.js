(this["webpackJsonpchatty-react"]=this["webpackJsonpchatty-react"]||[]).push([[0],{143:function(e,t){},153:function(e,t,a){},155:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(14),c=a.n(o),l=(a(92),a(44)),s=a(5),m=(a(29),function(){return n.a.createElement("div",null,n.a.createElement("div",{className:"navbar"},n.a.createElement("div",{className:"brand"},n.a.createElement("a",{href:"/"},n.a.createElement("h1",{className:"header"},"Chatty"," ",n.a.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 16 16",className:"bi bi-chat-fill",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},n.a.createElement("path",{d:"M8 15c4.418 0 8-3.134 8-7s-3.582-7-8-7-8 3.134-8 7c0 1.76.743 3.37 1.97 4.6-.097 1.016-.417 2.13-.771 2.966-.079.186.074.394.273.362 2.256-.37 3.597-.938 4.18-1.234A9.06 9.06 0 0 0 8 15z"})))))))}),i=a(157),u=a(158),h=a(159),d=function(){return n.a.createElement("div",null,n.a.createElement(m,null),n.a.createElement(i.a,null,n.a.createElement(u.a,{fluid:!0},n.a.createElement(i.a,null,n.a.createElement("h1",{className:"text-center"},"Welcome"),n.a.createElement("p",{className:"text-center"},"Chatty is a bi-directional messaging application that utilizes WebSockets."))),n.a.createElement("br",null),n.a.createElement(h.a,{variant:"primary",size:"lg",block:!0,href:"/join"},"Join Room"),n.a.createElement(h.a,{variant:"danger",size:"lg",block:!0,href:"/create"},"Create Session")))},E=a(76),p=a(16),f=a(17),v=a(20),g=a(19),b=a(162);var y=function(e){var t=e.errors.map((function(e,t){return n.a.createElement("p",{key:t},e)}));return e.errors.length>0?n.a.createElement(b.a,{variant:"danger",onClose:e.clearErrors,dismissible:!0},n.a.createElement(b.a.Heading,null,"Whoops!"),n.a.createElement("div",null,t)):n.a.createElement(n.a.Fragment,null)},C=a(161),k=function(e){Object(v.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(p.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={room_code:"",username:"",errors:[]},e.joinRoom=function(t){t.preventDefault(),""===e.state.room_code&&""===e.state.username?e.setState({errors:["Please enter your room code and username."]}):""===e.state.room_code?e.setState({errors:["Please enter your room code"]}):""===e.state.username?e.setState({errors:["Please enter your username."]}):window.location.href="/chat/".concat(e.state.room_code,"/").concat(e.state.username)},e.handleChange=function(t){var a=t.target.name;e.setState(Object(E.a)({},a,t.target.value))},e.clearErrors=function(){e.setState({errors:[]})},e}return Object(f.a)(a,[{key:"render",value:function(){var e=this;return n.a.createElement("div",null,n.a.createElement(m,null),n.a.createElement(i.a,null,n.a.createElement(u.a,{fluid:!0},n.a.createElement(i.a,null,n.a.createElement("h1",{className:"text-center"},"Join"),n.a.createElement("p",{className:"text-center"},"Please enter the five letter room code below."),n.a.createElement(y,{errors:this.state.errors,clearErrors:function(t){return e.clearErrors(t)}}),n.a.createElement(C.a,null,n.a.createElement(C.a.Group,{controlId:"formBasicEmail"},n.a.createElement(C.a.Control,{type:"email",placeholder:"Enter code",name:"room_code",onChange:function(t){return e.handleChange(t)}}),n.a.createElement(C.a.Text,{className:"text-muted"},"We'll never share your conversations with anyone else.")),n.a.createElement(C.a.Group,{controlId:"formBasicEmail"},n.a.createElement(C.a.Control,{type:"email",placeholder:"Enter username",name:"username",onChange:function(t){return e.handleChange(t)}}),n.a.createElement(C.a.Text,{className:"text-muted"},"In this app, feel free to call yourself whatever you like."))),n.a.createElement(h.a,{variant:"primary",size:"lg",block:!0,id:"join",onClick:function(t){return e.joinRoom(t)}},"Join Room")))))}}]),a}(r.Component),N=a(21),S=a.n(N),w=function(e){Object(v.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(p.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={errors:[],userName:"",redirect:!1,route:""},e.clearErrors=function(){e.setState({errors:[]})},e.handleChange=function(t){e.setState({userName:t.target.value})},e.genRoomCode=function(t){if(t.preventDefault(),""===e.state.userName)e.setState({errors:["Please enter your username."]});else{e.setState({errors:[]});for(var a="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=r.length,o=0;o<5;o++)a+=r.charAt(Math.floor(Math.random()*n));var c={result:a,admin:e.state.userName};S.a.post("/create",c).then((function(t){if(t){var a="/chat/".concat(t.data.roomCode,"/").concat(e.state.userName);e.setState({route:a}),e.setState({redirect:!0})}})).catch((function(e){console.log(e)}))}},e}return Object(f.a)(a,[{key:"render",value:function(){var e=this;return this.state.redirect?n.a.createElement(s.a,{from:"/create",to:this.state.route}):n.a.createElement("div",null,n.a.createElement(m,null),n.a.createElement(i.a,null,n.a.createElement(u.a,{fluid:!0},n.a.createElement(i.a,null,n.a.createElement("h1",{className:"text-center"},"Create"),n.a.createElement("p",{className:"text-center"},"Please enter your username and then click the button to generate your room's code."),n.a.createElement(y,{errors:this.state.errors,clearErrors:function(t){return e.clearErrors(t)}}),n.a.createElement(C.a,null,n.a.createElement(C.a.Group,{controlId:"formBasicEmail"},n.a.createElement(C.a.Control,{type:"email",placeholder:"Enter username",name:"userName",onChange:function(t){return e.handleChange(t)}}))),n.a.createElement(h.a,{variant:"primary",size:"lg",id:"create",onClick:this.genRoomCode,block:!0},"Create")))))}}]),a}(r.Component),j=a(83),x=a(160),O=a(79),B=function(e){var t=e.messages.map((function(e,t){return n.a.createElement("div",{key:t+3,className:"chat-flex"},n.a.createElement("p",{className:"yo",key:t},e.username,":"),n.a.createElement("p",{className:"blah",key:t+1},e.message))}));return n.a.createElement("div",null,t)},I=a(81),_=a.n(I),D=a(82),R=function(e){Object(v.a)(a,e);var t=Object(g.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).state={message:"",chats:[]},r.socket=_.a.connect("https://chatty-react-bw.herokuapp.com/"),r.socket.on("message",(function(e){r.state.chats.length>0&&(r.setState({chats:[].concat(Object(j.a)(r.state.chats),[e])}),r.scrollToBottom())})),r.scrollToBottom=function(){D.animateScroll.scrollToBottom({containerId:"chatbox",duration:500})},r.handleChange=function(e){e.preventDefault(),r.setState({message:e.target.value})},r.copyId=function(e){e.preventDefault(),navigator.clipboard.writeText(e.target.id)},r.handleSubmit=function(e){e.preventDefault();var t={username:r.props.match.params.username,message:r.state.message};r.socket.emit("message",t);var a={username:r.props.match.params.username,message:r.state.message,code:r.props.match.params.room_id};S.a.post("/chat",a).then((function(e){e&&r.setState({message:""})})).catch((function(e){console.log(e)}))},r}return Object(f.a)(a,[{key:"componentDidMount",value:function(){var e=this;S.a.get("/chat/".concat(this.props.match.params.room_id)).then((function(t){t.data.chats.length>0?(console.log(t.data.chats.length),e.setState({chats:t.data.chats}),e.scrollToBottom()):e.setState({chats:[{username:"Chatty",message:"Say hello!"}]})}))}},{key:"render",value:function(){var e=this;return n.a.createElement("div",null,n.a.createElement(m,null),n.a.createElement(i.a,null,n.a.createElement("div",{className:"invite-id"},n.a.createElement("h1",{className:"copy-id"},"Copy invite ID:"),n.a.createElement("h1",{onClick:function(t){return e.copyId(t)},className:"room-id",id:this.props.match.params.room_id},this.props.match.params.room_id)),n.a.createElement("div",{className:"chatbox",id:"chatbox"},n.a.createElement(B,{className:"chat-container",messages:this.state.chats})),n.a.createElement(x.a,null,n.a.createElement(O.a,{placeholder:"Enter your message","aria-label":"Recipient's username","aria-describedby":"basic-addon2",value:this.state.message,onChange:function(t){return e.handleChange(t)}}),n.a.createElement(x.a.Append,null,n.a.createElement(h.a,{variant:"primary",className:"send",onClick:this.handleSubmit},"Send")))))}}]),a}(r.Component);a(153);var T=function(){return n.a.createElement(l.a,null,n.a.createElement(s.b,{exact:!0,path:"/",component:d}),n.a.createElement(s.b,{path:"/join",component:k}),n.a.createElement(s.b,{path:"/create",component:w}),n.a.createElement(s.b,{path:"/chat/:room_id?/:username?",component:R}))};a(154),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(T,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},29:function(e,t,a){},87:function(e,t,a){e.exports=a(155)},92:function(e,t,a){}},[[87,1,2]]]);
//# sourceMappingURL=main.71910a2a.chunk.js.map